<div class="address-list">
  <div class="header">
    <h3>Direcciones</h3>
    <button 
      type="button" 
      class="btn-add"
      (click)="addAddress()"
    >
      + AÃ±adir DirecciÃ³n
    </button>
  </div>

  <!-- Lista de direcciones -->
  @if (addresses.length === 0) {
    <div class="empty-state">
      <p>No hay direcciones. Haz clic en "AÃ±adir DirecciÃ³n" para empezar.</p>
    </div>
  }

  @if (addresses.length > 0) {
    <div class="addresses-container">
      @for (addressControl of addresses; track $index) {
        <div class="address-item">
          <div class="address-header">
            <span class="address-number">DirecciÃ³n {{ $index + 1 }}</span>
            <button 
              type="button"
              class="btn-remove"
              (click)="removeAddress($index)"
              title="Eliminar direcciÃ³n"
            >
              ğŸ—‘ï¸ Eliminar
            </button>
          </div>
          
          <!-- 
            AquÃ­ usamos AddressFormComponent como CVA
            El formControl se vincula automÃ¡ticamente con el control del FormArray
            Usamos $any() para evitar problemas de tipado con AbstractControl
          -->
          <app-address-form [formControl]="$any(addressControl)"></app-address-form>
        </div>
      }
    </div>
  }
</div>

